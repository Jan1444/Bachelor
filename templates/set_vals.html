<!doctype html>
<html lang="de">
<meta charset="utf-8">

<head>
    <title>Photovoltaik-Einstellungen</title>
    <!--Navigator-->
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
          rel="stylesheet">
    <link href="{{ url_for('static', filename='css/navigator.css') }}" rel="stylesheet" type="text/css">
    <!--Favicon-->
    <meta content="#da532c" name="msapplication-TileColor">
    <meta content="#ffffff" name="theme-color">
    <link href="{{ url_for('static', filename='favicon/apple-touch-icon.png') }}" rel="apple-touch-icon"
          sizes="180x180">
    <link href="{{ url_for('static', filename='favicon/favicon-32x32.png') }}" rel="icon" sizes="32x32"
          type="image/png">
    <link href="{{ url_for('static', filename='favicon/favicon-16x16.png') }}" rel="icon" sizes="16x16"
          type="image/png">
    <link href="{{ url_for('static', filename='favicon/site.webmanifest') }}" rel="manifest">
    <link color="#5bbad5" href="{{ url_for('static', filename='favicon/safari-pinned-tab.svg') }}" rel="mask-icon">
    <!--Stylesheet-->
    <link href="{{ url_for('static', filename='css/style_set_vals.css') }}" rel="stylesheet" type="text/css">
</head>
<body>
<script src="{{ url_for('static', filename='javascript/update_dropdown.js') }}"></script>
<div id="main-container">
    <div class="menu">
        <ul class="menu-content">
            <!-- https://fonts.google.com/icons -->
            <li><a href="/"><span class="material-symbols-outlined">home</span><span>Home</span></a></li>
            <li><a href="/dashboard"><span class="material-symbols-outlined">dashboard</span><span>DashBoard</span></a>
            </li>
            <li><a href="/analytics"><span class="material-symbols-outlined">analytics</span><span>Analytics</span></a>
            </li>
            <li><a href="/file_download"><span
                    class="material-symbols-outlined">file_download</span><span>File Download</span></a></li>
            <li><a href="/file_upload"><span
                    class="material-symbols-outlined">file_upload</span><span>File Upload</span></a></li>
            <li><a href="/settings"><span class="material-symbols-outlined">settings</span><span>Settings</span></a>
            </li>
        </ul>
    </div>

    <table class="BoxHeader">
        <tr>
            <td>
                <img class="HeaderImage" src="{{ url_for('static', filename='favicon/android-chrome-512x512.png') }}">
                <h1 class="Headerh1">Settings</h1>
            </td>
        </tr>
    </table>

    <form action="/save_settings" class="BoxContent" method="post">
        <table>
                {% if error %}
                    <p style="color: red;">{{ error }}</p>
                {% endif %}
            <tr>
                <td class="Box1" colspan="3">
                    <b>Standort</b>
                </td>
            </tr>
            <!-- Standort -->
            <tr>
                <td><label for="latitude">Breitengrad [°]:</label></td>
                <td><input id="latitude" minlength="2" name="latitude" type="text"
                           value="{{ config['coordinates']['latitude'] }}"
                           {% if error %} style="border-color: red; border-width: 3px" {% endif %}></td>
                <td><label for="Straße" >Straße:</label>
                    <input id="Straße" minlength="2" name="Straße" type="text" value=""
                           {% if error %} style="border-color: red; border-width: 3px" {% endif %}>
                    <label for="Nr">Hausnummer:</label>
                    <input id="Nr" minlength="2" name="Nr" type="text" value=""
                           {% if error %} style="border-color: red; border-width: 3px" {% endif %}>
                    <label for="Stadt">Stadt:</label>
                    <input id="Stadt" minlength="2" name="Stadt" type="text" value=""
                           {% if error %} style="border-color: red; border-width: 3px" {% endif %}>
                </td>
            </tr>
            <tr>
                <td><label for="longitude">Längengrad [°]:</label></td>
                <td><input id="longitude" minlength="2" name="longitude"
                           type="text" value="{{ config['coordinates']['longitude'] }}"
                           {% if error %} style="border-color: red; border-width: 3px" {% endif %}></td>
                <td><label for="PLZ">Postleitzahl:</label>
                    <input id="PLZ" minlength="5" maxlength="5" name="PLZ" type="number"
                           {% if error %} style="border-color: red; border-width: 3px" {% endif %}>
                    <label for="Land">Land:</label>
                    <input id="Land" minlength="2" name="Land" type="text" value="Deutschland"
                           {% if error %} style="border-color: red; border-width: 3px" {% endif %}>
                </td>
            </tr>
            <tr>
                <td class="Box1" colspan="3">
                    <b>PV-Anlage</b>
                </td>
            </tr>
            <!-- PV-Anlage -->
            <tr>
                <td><label for="tilt_angle">Neigungswinkel [°]:</label></td>
                <td><input id="tilt_angle" minlength="2" name="tilt_angle" type="text"
                           value="{{ config['pv']['tilt_angle'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="area">Modulfläche [qm]:</label></td>
                <td><input id="area" minlength="2" name="area" type="text" value="{{ config['pv']['area'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="module_efficiency">Modul-Effizienz [%]:</label></td>
                <td><input id="module_efficiency" minlength="2" name="module_efficiency"
                           type="text" value="{{ config['pv']['module_efficiency'] }}"></td>
                <td></td>
            </tr>

            <tr>
                <td><label for="exposure_angle">Ausrichtungswinkel [°]:</label></td>
                <td><input id="exposure_angle" minlength="1" name="exposure_angle"
                           type="text" value="{{ config['pv']['exposure_angle'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="mounting_type">Montagetyp:</label></td>
                <td><input id="mounting_type" minlength="1" name="mounting_type"
                           type="text" value="{{ config['pv']['mounting_type'] }}"></td>
                <td>
                    <div class="tooltip">?
                        <span class="tooltiptext">
                            0: Completely free elevation<br>
                            1: On the roof, large distance<br>
                            2: Integrated on the roof or roof, good rear ventilation<br>
                            3: Integrated on the roof or rooftop, poor rear ventilation<br>
                            4: Integrated on the façade or façades, good rear ventilation<br>
                            5: Integrated on the façade or façades, poor rear ventilation<br>
                            6: Roof integration, without rear ventilation<br>
                            7: Façade integration, without rear ventilation.</span>
                    </div>
                </td>

            </tr>
            <tr>
                <td><label for="temperature_coefficient">Temperatur Koeffizient [%/°C]:</label></td>
                <td><input id="temperature_coefficient" minlength="1"
                           name="temperature_coefficient" type="text"
                           value="{{ config['pv']['temperature_coefficient'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="nominal_temperature">Nominal Temperatur [°C]:</label></td>
                <td><input id="nominal_temperature" minlength="1" name="nominal_temperature"
                           type="text" value="{{ config['pv']['nominal_temperature'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td class="Box1" colspan="3">
                    <b>Wechselrichter</b>
                </td>
            </tr>
            <!-- Wechselrichter -->
            <tr>
                <td><label for="converter_power">Wechselrichter Leistung [W]:</label></td>
                <td><input id="converter_power" minlength="1" name="converter_power"
                           type="text" value="{{ config['converter']['max_power'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td class="Box1" colspan="3">
                    <b>Strompreis</b>
                </td>
            </tr>
            <!-- Strompreis -->
            <tr>
                <td><label for="consumer_price">Strompreis [ct]:</label></td>
                <td><input id="consumer_price" minlength="1" name="consumer_price"
                           type="text" value="{{ config['market']['consumer_price'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td class="Box1" colspan="3">
                    <b>Shelly-TRV</b>
                </td>
            </tr>
            <!-- Shelly TRV -->
            <tr>
                <td><label for="ip_address">IP Adresse:</label></td>
                <td><input id="ip_address" minlength="13" name="ip_address"
                           type="text" value="{{ config['shelly']['ip_address'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td class="Box1" colspan="3">
                    <b>Split-Klimagerät:</b>
                </td>
            </tr>
            <!-- Split-Klimagerät -->
            <tr>
                <td><label for="air_conditioner">Hersteller:</label></td>
                <td><select name="air_conditioner" id="air_conditioner" class="felder"
                            onchange=toggleFieldset2("air_conditioner","air_conditioner_steering")>
                    <option  value="">Gerät wählen</option>
                    <option {% if config['air_conditioner']['air_conditioner'] == "Danfoss" %} selected="selected" {% endif %}
                    value="Danfoss">Danfoss</option>
                    <option {% if config['air_conditioner']['air_conditioner'] == "Mitsubishi" %} selected="selected" {% endif %}
                    value="Mitsubishi">Mitsubishi</option>
                </select></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td><select name="air_conditioner_steering" id="air_conditioner_steering" class="felder"
                onchange=toggleFieldset3("air_conditioner_steering","label_ip_cloud","ip_address_cloud","ir","label_ir")
                {% if config['air_conditioner']['air_conditioner_steering'] %} style="display: block;"
                    {% else %} style="display: none;" {% endif %}>
                    <option value="">Ansteuerung wählen</option>
                    <option {% if config['air_conditioner']['air_conditioner_steering'] == "cloud" %} selected="selected" {% endif %}
                    value="cloud">Cloud</option>
                    <option {% if config['air_conditioner']['air_conditioner_steering'] == "ir_remote" %} selected="selected" {% endif %}
                    value="ir_remote">IR-Remote</option>
                </select></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="ip_address_cloud" id="label_ip_cloud"
                {% if config['air_conditioner']['ip_address_cloud'] %} style="display: block;"
                    {% else %} style="display: none;" {% endif %}>
                    IP Adresse:</label></td>
                <td><input id="ip_address_cloud" minlength="13" name="ip_address_cloud"
                           type="text" value="{{ config['air_conditioner']['ip_address_cloud'] }}"
                           {% if config['air_conditioner']['ip_address_cloud'] %} style="display: block;"
                    {% else %} style="display: none;" {% endif %}></td>
                <td></td>

            </tr>
                <!-- IR Remote -->
            <tr>
                <td><label for="ir" id="label_ir"
                           {% if config['air_conditioner']['ir_remote'] %} style="display: block;"
                    {% else %} style="display: none;" {% endif %}
                    >IR Button XXX:</label></td>
                <td><input id="ir" minlength="1" name="ir_remote"
                           type="text" value="{{ config['air_conditioner']['ir_remote'] }}"
                           {% if config['air_conditioner']['ir_remote'] %} style="display: block;"
                    {% else %} style="display: none;" {% endif %}></td>
                <td></td>
            </tr>
            <tr>
                <td class="Box1" colspan="3">
                    <b>Heizlast</b>
                </td>
            </tr>
            <!-- Heizlast -->
            <tr>
                <td><label for="heating_power">Heizwärmebedarf laut Energieausweis [kWh/(m²a)]:</label></td>
                <td><input id="heating_power" minlength="1" name="heating_power"
                           type="text" value="{{ config['heating']['heating_power'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="heating_area">Fläche [m²]:</label></td>
                <td><input id="heating_area" minlength="1" name="heating_area"
                           type="text" value="{{ config['heating']['heating_area'] }}"></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <button type="submit">Speichern</button>
                </td>
                <td></td>
            </tr>
        </table>
    </form>
</div>

</body>
</html>